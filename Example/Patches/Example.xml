<Patch>
	<!--Only run the AddModExtension operation if it doesn't already have it, for the sake of compatibility with other mods.-->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/PawnKindDef[defName="Chicken"]/modExtensions/li[@Class="DZY.Crossbreeding.Extension"]</xpath>
		<nomatch Class="PatchOperationAddModExtension">
			<xpath>Defs/PawnKindDef[defName="Chicken"]</xpath>
			<value>
				<li Class="DZY.Crossbreeding.Extension">
					<outcomes></outcomes>
				</li>
			</value>
		</nomatch>
	</Operation>

	<!--Add outcomes via patch.-->
	<!--Note: This example only affects the offspring of hens. If a rooster were to fertilize one of the other animals listed here, it would use vanilla behaviour, as the mod only checks the mother for the ModExtension.-->
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/PawnKindDef[defName="Chicken"]/modExtensions/li[@Class="DZY.Crossbreeding.Extension"]/outcomes</xpath>
		<value>
			<Cat>
				<Paternal />
				<!--Inherits father's race, in this case a cat.-->
			</Cat>
			<LabradorRetriever>
				<Maternal />
				<!--Inherits mother's race, in this case a chicken.-->
			</LabradorRetriever>
			<Thrumbo>
				<Random />
				<!--Inherits either the father or mother's race on a coin flip. 50% Thrumbos, 50% chickens.-->
				<!--For littered births and stacks of eggs, the outcome is rerolled for each child.-->
			</Thrumbo>
			<Horse>
				<Other>
					<Donkey/>
					<!--Does not inherit, instead produces a donkey.-->
				</Other>
			</Horse>
			<Hare>
				<Other>
					<Muffalo/>
					<Bison/>
					<!--Does not inherit, instead has a 50% chance of producing a muffalo, and a 50% chance of producing a bison.-->
				</Other>
			</Hare>
			<Elephant>
				<Other>
					<Thrumbo>1</Thrumbo>
					<Cat>9</Cat>
					<!--10% chance of a thrumbo, 90% chance of a cat.-->
				</Other>
			</Elephant>
		</value>
	</Operation>

	<!--Adding crossbreeding compatibility and making changes for testing.-->

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="Chicken"]/race</xpath>
		<value>
			<canCrossBreedWith>
				<li>Cat</li>
				<li>LabradorRetriever</li>
				<li>Thrumbo</li>
				<li>Horse</li>
				<li>Hare</li>
				<li>Elephant</li>
			</canCrossBreedWith>
			<mateMtbHours>0.2</mateMtbHours>
			<!--mateMtbHours is only edited for testing purposes, so you don't have to wait too long for animals to reproduce.-->
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="Cat"]/race</xpath>
		<value>
			<canCrossBreedWith>
				<li>Chicken</li>
			</canCrossBreedWith>
			<mateMtbHours>0.2</mateMtbHours>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="LabradorRetriever"]/race</xpath>
		<value>
			<canCrossBreedWith>
				<li>Chicken</li>
			</canCrossBreedWith>
			<mateMtbHours>0.2</mateMtbHours>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="Thrumbo"]/race</xpath>
		<value>
			<canCrossBreedWith>
				<li>Chicken</li>
			</canCrossBreedWith>
			<mateMtbHours>0.2</mateMtbHours>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="Horse"]/race</xpath>
		<value>
			<canCrossBreedWith>
				<li>Chicken</li>
			</canCrossBreedWith>
			<mateMtbHours>0.2</mateMtbHours>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="Hare"]/race</xpath>
		<value>
			<canCrossBreedWith>
				<li>Chicken</li>
			</canCrossBreedWith>
			<mateMtbHours>0.2</mateMtbHours>
		</value>
	</Operation>
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="Elephant"]/race</xpath>
		<value>
			<canCrossBreedWith>
				<li>Chicken</li>
			</canCrossBreedWith>
			<mateMtbHours>0.2</mateMtbHours>
		</value>
	</Operation>
	<!--Make chickens lay 20 eggs at a time, really fast (but stop at 50% when unfertilized), for the sake of testing.-->
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="Chicken"]/comps</xpath>
		<value>
			<comps>
				<li Class="CompProperties_EggLayer">
					<eggUnfertilizedDef>EggChickenUnfertilized</eggUnfertilizedDef>
					<eggProgressUnfertilizedMax>0.5</eggProgressUnfertilizedMax>
					<eggFertilizedDef>EggChickenFertilized</eggFertilizedDef>
					<eggFertilizationCountMax>20</eggFertilizationCountMax>
					<eggLayIntervalDays>0</eggLayIntervalDays>
					<eggCountRange>20</eggCountRange>
				</li>
			</comps>
		</value>
	</Operation>
	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="EggChickenFertilized"]/comps</xpath>
		<value>
			<comps>
				<li Class="CompProperties_Hatcher">
					<hatcherDaystoHatch>1</hatcherDaystoHatch>
					<hatcherPawn>Chicken</hatcherPawn>
				</li>
			</comps>
		</value>
	</Operation>
</Patch>